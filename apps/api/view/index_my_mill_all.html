<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我的矿机</title>
    <link rel="stylesheet" href="../../public/static/css/reset.css">
    <script src="../../public/static/js/jquery-3.2.1.js"></script>
    <style>
        body{
    
            background: #F5F5F5;
        }
        .header{
            background: #fff;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            height: .95rem;
        }
        .back{
            position: absolute;
            left: .3rem;
        }
        .back img{
            width: .5rem;
            height: .5rem;
        }
        .header .title{
            font-size: .4rem;
            font-family: SourceHanSansCN-Medium;
            color: #1A1826;
        }
        .my-ltc-list{
            margin: .3rem .3rem 0 .3rem;
        }
        .my-ltc-item{
            position: relative;
            height: 3.57rem;
            margin-top: .2rem;
            display: flex;
            align-items: center;
            background: #3D3F4C;
            border-radius: .2rem;
        }
        .my-ltc-item .my-ltc-item-img{
            width: 1.21rem;
            height: 1.03rem;
            margin: 0 .45rem;
        }
        .my-ltc-item-title{
            display: inline-block;
            font-size: .34rem;
            font-family: Arial-BoldMT;
            color: #FFFFFF;
            opacity: 1;
            margin-bottom: .48rem;
        }
        .my-ltc-item-num,.my-ltc-item-money{
            font-size: .24rem;
            font-family: SourceHanSansCN-Regular;
            color: #AEAFB5;
            opacity: 1;
        }
        .my-ltc-item-money{
            margin-top: .12rem;
        }
        .my-ltc-item-flag{
            position: absolute;
            right: 0;
            top:.15rem;
            width: 1.2rem;
            height: .46rem;
            background: #70737C;
            display: flex;
            align-items: center;
            padding-left: .16rem;
            border-radius: .46rem 0 0 .46rem;
        }
        .my-ltc-item-flag img{
            width: .22rem;
            height: .22rem;
        }
        .my-ltc-item-flag span{
            font-size: .2rem;
            font-family: SourceHanSansCN-Regular;
            color: #FFFFFF;
        }
        
        .category{
            width: 100%;
            display: flex;
            padding: 0.4rem 0;
        }
        .category>li{
            flex: 1;
        }
        .category>li>a{
            width: 100%;
            line-height: 0.3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.3rem;
            font-weight: bold;
            color: #8A8C98;
            position: relative;
            padding-bottom: 0.2rem;
        }
        .border{
            width: 0.6rem;
            height: 0.08rem;
            background: #8A8C98;
            position: absolute;
            bottom: 0;
            left: 50%;
            margin-left: -0.3rem;
        }
        .category>li>a.active{
            color: #000000;
        }
        .category>li>a.active .border{
            background: #DEAF5F;
        }
        .panel{
            display: none;
            padding: 0 15px;
        }
        .panel-active{
            display: block;
        }
        .category2,.category3{
            padding: 0px;
            padding-bottom:10px;
        }
        category2{
            padding: 0px;
            padding-bottom:10px;
        }
        .category2{  
            white-space: nowrap;
            overflow: scroll;
        }
        
        .category2 > li {
            background: #e2e2e2;
            margin-right: 10px;
            padding: 5px 10px;
            margin: auto 5px;
            border-radius: 6px;
        }
        .category2 > li > a{
            padding-bottom: 0px;
            font-size: .2rem !important;
        }
    </style>
</head>
<script>
    var width = document.documentElement.clientWidth;
    document.documentElement.style.fontSize = width/7.5 + 'px';
</script>
<body>
<div class="header">
    <a href="javascript:history.go(-1)" class="back"><img src="../../public/static/images/back.png" alt=""></a>
    <div class="title">我的矿机</div>
</div>

<div class="container">
    <ul class="category category1">
      {volist name='oc_types' id='oc_type'}
        <li>
            <a data-key="panel1-{$oc_type.id}" oc-type='{$oc_type.id}' {if condition="1 eq $oc_type.id"} class="active" {/if} href="javascript:void(0)">
                {$oc_type.label}专区
                <span class="border"></span>
            </a>
        </li>
      {/volist}
    </ul>
    {volist name='oc_types' id='oc_type'}
        {if $oc_type.id != 3}
            <div class="panel panel1 {if condition='1 eq $oc_type.id'} panel-active {/if}" id="panel1-{$oc_type.id}">
                <ul class="category category2">
                    <li>
                        <a data-key="panel20-{$oc_type.id}" class="active" href="javascript:void(0)">
                            全部
                        </a>
                    </li>
                    {volist name='category2_btc' id='category2'}
                        <li>
                            <a data-key="panel2{$category2.id}-{$oc_type.id}" href="javascript:void(0)">
                                {$category2.name}
                            </a>
                        </li>
                    {/volist}
                </ul>
                
                <div id="panel20-{$oc_type.id}" class="panel panel2 panel-active">
                    <ul class="category category3">
                        <li>
                            <a data-key="panel30-{$oc_type.id}" class="active" href="javascript:void(0)">
                                正在产矿
                            </a>
                        </li>
                        <li>
                            <a data-key="panel31-{$oc_type.id}" href="javascript:void(0)">
                                已过期
                            </a>
                        </li>
                    </ul>
                    
                    <ul class="panel panel3 panel-active"  id="panel30-{$oc_type.id}">
                        {volist name="list" id='ll'}
                            {if $ll.oc_type == $oc_type.id}
                                {if $ll.active == 1}
                                    <a href="/api/index/my_mill?id={$ll.id}&buy_time={$ll.buy_time_t}&token={$token}"> 
                                        <li class="my-ltc-item">
                                            <img class="my-ltc-item-img" src="{:getfile($ll.cover)}" alt="">
                                            <div class="my-ltc-item-right">
                                                <p class="my-ltc-item-title">{$ll.name}</p>
                                                <p class="my-ltc-item-num">矿机数量：{$ll.mill_num}</p>
                                                <p class="my-ltc-item-money">昨日收益：{:showprice($ll.yesterday_earnings)}</p>
                                                <p class="my-ltc-item-money">我的算力: {$ll.suanli}</p>
                                                <p class="my-ltc-item-money">购买日期: {$ll.buy_time}</p>
                                                {if $ll.days <= 1080}
<p class="my-ltc-item-money">有效期: {$ll.label}</p>
{/if}
                                                <p class="my-ltc-item-money">过期日期: {$ll.end_date}</p>
                                                <p class="my-ltc-item-money">开挖日期: {$ll.earning_date}</p>
                                            </div>
                                            <div class="my-ltc-item-flag">
                                                <img class="bz" src="../../public/static/images/bz.png" alt="">
                                                <span>保障中</span>
                                            </div>
                                        </li>
                                    </a>
                                {/if}
                            {/if}
                        {/volist}
                    </ul>
            
                    <ul class="panel panel3"  id="panel31-{$oc_type.id}">
                        {volist name="list" id='ll'}
                            {if $ll.oc_type == $oc_type.id}
                                {if $ll.active == 0}
                                    <a href="/api/index/my_mill?id={$ll.id}&buy_time={$ll.buy_time_t}&token={$token}"> 
                                        <li class="my-ltc-item">
                                            <img class="my-ltc-item-img" src="{:getfile($ll.cover)}" alt="">
                                            <div class="my-ltc-item-right">
                                                <p class="my-ltc-item-title">{$ll.name}</p>
                                                <p class="my-ltc-item-num">矿机数量：{$ll.mill_num}</p>
                                                <p class="my-ltc-item-money">昨日收益：{:showprice($ll.yesterday_earnings)}</p>
                                                <p class="my-ltc-item-money">我的算力: {$ll.suanli}</p>
                                                <p class="my-ltc-item-money">购买日期: {$ll.buy_time}</p>
                                                {if $ll.days <= 1080}
<p class="my-ltc-item-money">有效期: {$ll.label}</p>
{/if}
                                                <p class="my-ltc-item-money">过期日期: {$ll.end_date}</p>
                                                <p class="my-ltc-item-money">开挖日期: {$ll.earning_date}</p>
                                            </div>
                                            <div class="my-ltc-item-flag">
                                                <img class="bz" src="../../public/static/images/bz.png" alt="">
                                                <span>保障中</span>
                                            </div>
                                        </li>
                                    </a>
                                {/if}
                            {/if}
                        {/volist}
                    </ul>
                </div>

                {volist name='category2_btc' id='category2'}
                <div id="panel2{$category2.id}-{$oc_type.id}" class="panel panel2 ">
                    <ul class="category category3">
                        <li>
                            <a data-key="panel30-{$oc_type.id}" class="active" href="javascript:void(0)">
                                正在产矿
                            </a>
                        </li>
                        <li>
                            <a data-key="panel31-{$oc_type.id}" href="javascript:void(0)">
                                已过期
                            </a>
                        </li>
                    </ul>
                    
                    <ul class="panel panel3 panel-active"  id="panel30-{$oc_type.id}">
                        {volist name="list" id='ll'}
                            {if $ll.oc_type == $oc_type.id}
                            {if $ll.category == $category2.id}
                                {if $ll.active == 1}
                                    <a href="/api/index/my_mill?id={$ll.id}&buy_time={$ll.buy_time_t}&token={$token}"> 
                                        <li class="my-ltc-item">
                                            <img class="my-ltc-item-img" src="{:getfile($ll.cover)}" alt="">
                                            <div class="my-ltc-item-right">
                                                <p class="my-ltc-item-title">{$ll.name}</p>
                                                <p class="my-ltc-item-num">矿机数量：{$ll.mill_num}</p>
                                                <p class="my-ltc-item-money">昨日收益：{:showprice($ll.yesterday_earnings)}</p>
                                                <p class="my-ltc-item-money">我的算力: {$ll.suanli}</p>
                                                <p class="my-ltc-item-money">购买日期: {$ll.buy_time}</p>
                                                {if $ll.days <= 1080}
<p class="my-ltc-item-money">有效期: {$ll.label}</p>
{/if}
                                                <p class="my-ltc-item-money">过期日期: {$ll.end_date}</p>
                                                <p class="my-ltc-item-money">开挖日期: {$ll.earning_date}</p>
                                            </div>
                                            <div class="my-ltc-item-flag">
                                                <img class="bz" src="../../public/static/images/bz.png" alt="">
                                                <span>保障中</span>
                                            </div>
                                        </li>
                                    </a>
                                {/if}
                                {/if}
                            {/if}
                        {/volist}
                    </ul>
            
                    <ul class="panel panel3"  id="panel31-{$oc_type.id}">
                        {volist name="list" id='ll'}
                            {if $ll.oc_type == $oc_type.id}
                            {if $ll.category == $category2.id}
                                {if $ll.active == 0}
                                    <a href="/api/index/my_mill?id={$ll.id}&buy_time={$ll.buy_time_t}&token={$token}"> 
                                        <li class="my-ltc-item">
                                            <img class="my-ltc-item-img" src="{:getfile($ll.cover)}" alt="">
                                            <div class="my-ltc-item-right">
                                                <p class="my-ltc-item-title">{$ll.name}</p>
                                                <p class="my-ltc-item-num">矿机数量：{$ll.mill_num}</p>
                                                <p class="my-ltc-item-money">昨日收益：{:showprice($ll.yesterday_earnings)}</p>
                                                <p class="my-ltc-item-money">我的算力: {$ll.suanli}</p>
                                                <p class="my-ltc-item-money">购买日期: {$ll.buy_time}</p>
                                                {if $ll.days <= 1080}
<p class="my-ltc-item-money">有效期: {$ll.label}</p>
{/if}
                                                <p class="my-ltc-item-money">过期日期: {$ll.end_date}</p>
                                                <p class="my-ltc-item-money">开挖日期: {$ll.earning_date}</p>
                                            </div>
                                            <div class="my-ltc-item-flag">
                                                <img class="bz" src="../../public/static/images/bz.png" alt="">
                                                <span>保障中</span>
                                            </div>
                                        </li>
                                    </a>
                                {/if}
                            {/if}
                            {/if}
                        {/volist}
                    </ul>
                </div>
                {/volist}
            </div>
        {/if}
    {/volist}
    
    

    <div class="panel panel1 " id="panel1-3">
        <ul class="category category2">
            <li>
                <a data-key="panel20-3" class="active" href="javascript:void(0)">
                    全部
                </a>
            </li>
            {volist name='ipfs_types' id='category2'}
                <li>
                    <a data-key="panel2{$category2.id}-3" href="javascript:void(0)">
                        {$category2.label}
                    </a>
                </li>
            {/volist}
        </ul>
        
        <div id="panel20-3" class="panel panel2 panel-active">
            <ul class="category category3">
                <li>
                    <a data-key="panel30-3" class="active" href="javascript:void(0)">
                        正在产矿
                    </a>
                </li>
                <li>
                    <a data-key="panel31-3" href="javascript:void(0)">
                        已过期
                    </a>
                </li>
            </ul>
            
            <ul class="panel panel3 panel-active"  id="panel30-3">
                {volist name="list" id='ll'}
                    {if $ll.oc_type == 3}
                        {if $ll.active == 1}
                            <a href="/api/index/my_mill?id={$ll.id}&buy_time={$ll.buy_time_t}&token={$token}"> 
                                <li class="my-ltc-item">
                                    <img class="my-ltc-item-img" src="{:getfile($ll.cover)}" alt="">
                                    <div class="my-ltc-item-right">
                                        <p class="my-ltc-item-title">{$ll.name}</p>
                                        <p class="my-ltc-item-num">矿机数量：{$ll.mill_num}</p>
                                        <p class="my-ltc-item-money">昨日收益：{:showprice($ll.yesterday_earnings)}</p>
                                        <p class="my-ltc-item-money">我的算力: {$ll.suanli}</p>
                                        <p class="my-ltc-item-money">购买日期: {$ll.buy_time}</p>
                                        {if $ll.days <= 1080}
<p class="my-ltc-item-money">有效期: {$ll.label}</p>
{/if}
                                        <p class="my-ltc-item-money">过期日期: {$ll.end_date}</p>
                                                <p class="my-ltc-item-money">开挖日期: {$ll.earning_date}</p>
                                    </div>
                                    <div class="my-ltc-item-flag">
                                        <img class="bz" src="../../public/static/images/bz.png" alt="">
                                        <span>保障中</span>
                                    </div>
                                </li>
                            </a>
                        {/if}
                    {/if}
                {/volist}
            </ul>
    
            <ul class="panel panel3"  id="panel31-3">
                {volist name="list" id='ll'}
                    {if $ll.oc_type == 3}
                        {if $ll.active == 0}
                            <a href="/api/index/my_mill?id={$ll.id}&buy_time={$ll.buy_time_t}&token={$token}"> 
                                <li class="my-ltc-item">
                                    <img class="my-ltc-item-img" src="{:getfile($ll.cover)}" alt="">
                                    <div class="my-ltc-item-right">
                                        <p class="my-ltc-item-title">{$ll.name}</p>
                                        <p class="my-ltc-item-num">矿机数量：{$ll.mill_num}</p>
                                        <p class="my-ltc-item-money">昨日收益：{:showprice($ll.yesterday_earnings)}</p>
                                        <p class="my-ltc-item-money">我的算力: {$ll.suanli}</p>
                                        <p class="my-ltc-item-money">购买日期: {$ll.buy_time}</p>
                                        {if $ll.days <= 1080}
<p class="my-ltc-item-money">有效期: {$ll.label}</p>
{/if}
                                        <p class="my-ltc-item-money">过期日期: {$ll.end_date}</p>
                                                <p class="my-ltc-item-money">开挖日期: {$ll.earning_date}</p>
                                    </div>
                                    <div class="my-ltc-item-flag">
                                        <img class="bz" src="../../public/static/images/bz.png" alt="">
                                        <span>保障中</span>
                                    </div>
                                </li>
                            </a>
                        {/if}
                    {/if}
                {/volist}
            </ul>
        </div>
  
        {volist name='ipfs_types' id='category2'}
        <div id="panel2{$category2.id}-3" class="panel panel2 ">
            <ul class="category category3">
                <li>
                    <a data-key="panel30-3" class="active" href="javascript:void(0)">
                        正在产矿
                    </a>
                </li>
                <li>
                    <a data-key="panel31-3" href="javascript:void(0)">
                        已过期
                    </a>
                </li>
            </ul>
            
            <ul class="panel panel3 panel-active"  id="panel30-3">
                {volist name="list" id='ll'}
                    {if $ll.oc_type == 3}
                    {if $ll.ipfs_type == $category2.id}
                        {if $ll.active == 1}
                            <a href="/api/index/my_mill?id={$ll.id}&buy_time={$ll.buy_time_t}&token={$token}"> 
                                <li class="my-ltc-item">
                                    <img class="my-ltc-item-img" src="{:getfile($ll.cover)}" alt="">
                                    <div class="my-ltc-item-right">
                                        <p class="my-ltc-item-title">{$ll.name}</p>
                                        <p class="my-ltc-item-num">矿机数量：{$ll.mill_num}</p>
                                        <p class="my-ltc-item-money">昨日收益：{:showprice($ll.yesterday_earnings)}</p>
                                        <p class="my-ltc-item-money">我的算力: {$ll.suanli}</p>
                                        <p class="my-ltc-item-money">购买日期: {$ll.buy_time}</p>
                                        {if $ll.days <= 1080}
<p class="my-ltc-item-money">有效期: {$ll.label}</p>
{/if}
                                        <p class="my-ltc-item-money">过期日期: {$ll.end_date}</p>
                                                <p class="my-ltc-item-money">开挖日期: {$ll.earning_date}</p>
                                    </div>
                                    <div class="my-ltc-item-flag">
                                        <img class="bz" src="../../public/static/images/bz.png" alt="">
                                        <span>保障中</span>
                                    </div>
                                </li>
                            </a>
                        {/if}
                        {/if}
                    {/if}
                {/volist}
            </ul>
    
            <ul class="panel panel3"  id="panel31-3">
                {volist name="list" id='ll'}
                    {if $ll.oc_type ==3}
                    {if $ll.ipfs_type == $category2.id}
                        {if $ll.active == 0}
                            <a href="/api/index/my_mill?id={$ll.id}&buy_time={$ll.buy_time_t}&token={$token}"> 
                                <li class="my-ltc-item">
                                    <img class="my-ltc-item-img" src="{:getfile($ll.cover)}" alt="">
                                    <div class="my-ltc-item-right">
                                        <p class="my-ltc-item-title">{$ll.name}</p>
                                        <p class="my-ltc-item-num">矿机数量：{$ll.mill_num}</p>
                                        <p class="my-ltc-item-money">昨日收益：{:showprice($ll.yesterday_earnings)}</p>
                                        <p class="my-ltc-item-money">我的算力: {$ll.suanli}</p>
                                        <p class="my-ltc-item-money">购买日期: {$ll.buy_time}</p>
                                        {if $ll.days <= 1080}
<p class="my-ltc-item-money">有效期: {$ll.label}</p>
{/if}
                                        <p class="my-ltc-item-money">过期日期: {$ll.end_date}</p>
                                                <p class="my-ltc-item-money">开挖日期: {$ll.earning_date}</p>
                                    </div>
                                    <div class="my-ltc-item-flag">
                                        <img class="bz" src="../../public/static/images/bz.png" alt="">
                                        <span>保障中</span>
                                    </div>
                                </li>
                            </a>
                        {/if}
                    {/if}
                    {/if}
                {/volist}
            </ul>
        </div>
        {/volist}
    </div>

  </div>

</body>
<script>
    $('.category1 li a').click(function () {
        var that = $(this);
        var key = that.data('key');
        const ocType = $(this).attr('oc-type')
        console.log(ocType)
        $('.category1 li a').removeClass('active');
        that.addClass('active');
        $('.panel1').removeClass('panel-active');
        $('#' + key).addClass('panel-active');

        $('#' + key).find(".category2").find('a').removeClass('active')
        $('#' + key).find(".category2").find(':first-child').find('a').addClass('active')
        $('#' + key).find('.panel2').removeClass('panel-active')
        $('#' + key).find('.panel2').first().addClass('panel-active')
    })
    $('.category2 li a').click(function () {
        var that = $(this);
        var key = that.data('key');
        $('.category2 li a').removeClass('active');
        that.addClass('active');
        $('.panel2').removeClass('panel-active');
        $('#' + key).addClass('panel-active');
        console.log()
        $('#' + key).find(".category3").find('a').removeClass('active')
        $('#' + key).find(".category3").find(':first-child').find('a').addClass('active')
        $('#' + key).find('.panel3').removeClass('panel-active')
        $('#' + key).find('.panel3').first().addClass('panel-active')
    })
    $('.category3 li a').click(function () {
        var that = $(this);
        var key = that.data('key');
        $('.category3 li a').removeClass('active');
        that.addClass('active');
        $('.panel3').removeClass('panel-active')
        $('#' + key).addClass('panel-active');
        console.log(key)
    })
</script>
</html>